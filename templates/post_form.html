{% extends "base.html" %}

{% block title %}{{ 'Edit' if post else 'New' }} Post - Cloud CMS{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="bi bi-{{ 'pencil' if post else 'plus-circle' }}"></i> {{ 'Edit' if post else 'New' }} Post</h1>

<div class="card">
    <div class="card-body">
        <form method="POST" action="{{ url_for('edit_post', post_id=post.id) if post else url_for('new_post') }}">
            <div class="mb-3">
                <label for="title" class="form-label">Title *</label>
                <input type="text" class="form-control" id="title" name="title" value="{{ post.title if post else '' }}" required>
            </div>
            <div class="mb-3">
                <label for="slug" class="form-label">Slug</label>
                <input type="text" class="form-control" id="slug" name="slug" value="{{ post.slug if post else '' }}">
                <small class="form-text text-muted">URL-friendly version of the title</small>
            </div>
            <div class="mb-3">
                <label for="category_id" class="form-label">Category</label>
                <select class="form-select" id="category_id" name="category_id">
                    <option value="">Uncategorized</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}" {{ 'selected' if post and post.category_id == category.id else '' }}>
                        {{ category.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-3">
                <label for="excerpt" class="form-label">Excerpt</label>
                <textarea class="form-control" id="excerpt" name="excerpt" rows="3">{{ post.excerpt if post else '' }}</textarea>
            </div>
            <div class="mb-3">
                <label for="content" class="form-label">Content *</label>
                <textarea class="form-control" id="content" name="content" rows="10" required>{{ post.content if post else '' }}</textarea>
            </div>
            <div class="mb-3">
                <label for="status" class="form-label">Status</label>
                <select class="form-select" id="status" name="status">
                    <option value="draft" {{ 'selected' if post and post.status == 'draft' else '' }}>Draft</option>
                    <option value="published" {{ 'selected' if post and post.status == 'published' else '' }}>Published</option>
                    <option value="archived" {{ 'selected' if post and post.status == 'archived' else '' }}>Archived</option>
                </select>
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Save Post
                </button>
                <a href="{{ url_for('posts') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

